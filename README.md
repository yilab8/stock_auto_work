# stock_auto_work

使用 Go 建立的快速估值試算網站。輸入股票代號後，系統會呼叫臺灣證交所公開資料的上市公司月營收 API，自動整理近兩年數據、計算年增率，並依據使用者提供的毛利率、營業費用、稅率等假設推估季度 EPS 與年度估價。

## 功能總覽

- 擷取上市公司月營收，支援民國與西元年月格式解析。
- 依照已公布月份計算年增率與月增率，未公布月份可一鍵套用參考值或自行輸入假設。
- 依照輸入的毛利率、費用與稅率假設計算每季毛利、營業利益、稅後淨利與 EPS，並自動套用已公告季度的檢表稅後淨利 / EPS。
- 根據年度 EPS 與自訂本益比估計合理價格，顯示與現價的操作空間。
- 當官方 API 無回應時，營收與檢表皆會退回內建示例資料，維持頁面可操作性。

## 內建示例資料

為了方便離線試算，專案內預先整理了兩檔常見股票的公開月營收資料（新台幣千元）與檢表稅後淨利：

| 股票代號 | 公司 | 資料期間 |
| --- | --- | --- |
| 2330 | 台灣積體電路製造股份有限公司 | 2023 年全年度 + 2024 年 1-6 月 |
| 2317 | 鴻海精密工業股份有限公司 | 2023 年全年度 + 2024 年 1-6 月 |

- 當伺服器無法連上證交所 API 或 API 無回應時，系統會自動套用上述示例資料。
- 預設表單的毛利率、營業費用、股本等欄位亦會套用對應公司的常見假設值，可作為試算起始點。
- 若已有最新檢表資料，頁面會顯示當季稅後淨利與基本每股盈餘，可一鍵套用為當季 EPS 參考值。
- 其他股票代號仍可輸入，但若缺少示例資料且 API 又無回應，畫面會提示錯誤。

> 示範資料僅供練習估值用，實際投資前請再自行查核最新公告數據與財務指標。

## 執行方式

```bash
# 下載相依套件並執行單元測試
go test ./...

# 啟動網站，預設監聽 http://localhost:8080
go run ./cmd/server
```

啟動後輸入股票代號 (例如 2330) 與假設條件，即可於瀏覽器查看營收推估與估值結果。表單中金額預設使用「新台幣千元」，股本以「百萬股」為單位。

## 資料來源

- 臺灣證券交易所公開資料平台：上市公司每月營收 (t187ap03_L)
- 臺灣證券交易所公開資料平台：上市公司綜合損益表-稅後淨利 (t187ap08)

> 測試環境中會以模擬伺服器取代遠端服務；若實際部署時網路連線受限，系統會自動退回內建示例資料。

